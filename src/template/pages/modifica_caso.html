<main class="container page-modifica-caso">
    <header class="page-header">
        <h1>‚úèÔ∏è Modifica Caso</h1>
        <p class="subtitle">Stai modificando: <strong><!-- caso_titolo --></strong></p>
    </header>

    <div id="feedback-area">
        <!-- feedback_message -->
    </div>

    <!-- avviso_riapprovazione -->

    <form method="POST" enctype="multipart/form-data" class="form-segnala" id="form-modifica-caso">
        <input type="hidden" name="action" value="modifica_caso">
        <!-- hidden_caso_immagine -->

        <!-- SEZIONE: Informazioni Caso -->
        <fieldset class="form-section">
            <legend>üìã Informazioni Generali</legend>
            
            <div class="form-group">
                <label for="titolo">Titolo del Caso *</label>
                <input type="text" id="titolo" name="titolo" required 
                       minlength="5" maxlength="200"
                       value="<!-- value_titolo -->"
                       placeholder="Es: Il caso di Via Poma">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="data_crimine">Data dell'Accaduto *</label>
                    <input type="date" id="data_crimine" name="data_crimine" required
                           value="<!-- value_data -->">
                </div>
                
                <div class="form-group">
                    <label for="luogo">Luogo *</label>
                    <input type="text" id="luogo" name="luogo" required
                           value="<!-- value_luogo -->"
                           placeholder="Es: Roma, Italia">
                </div>
            </div>

            <div class="form-group">
                <label for="tipologia">Categoria</label>
                <select id="tipologia" name="tipologia">
                    <!-- opzioni_tipologia -->
                </select>
            </div>

            <div class="form-group">
                <label for="descrizione_breve">Descrizione Breve * <small>(max 500 caratteri)</small></label>
                <textarea id="descrizione_breve" name="descrizione_breve" required
                          maxlength="500" rows="3"
                          placeholder="Breve sintesi del caso..."><!-- value_descrizione --></textarea>
            </div>

            <div class="form-group">
                <label for="storia">Ricostruzione Completa *</label>
                <textarea id="storia" name="storia" required
                          minlength="50" rows="10"
                          placeholder="Descrivi in dettaglio la storia del caso..."><!-- value_storia --></textarea>
            </div>

            <!-- IMMAGINE CASO -->
            <div class="form-group">
                <label for="immagine_caso">Immagine del Caso (carica per sostituire)</label>
                <!-- anteprima_immagine_caso -->
                <input type="file"
                    id="immagine_caso"
                    name="immagine_caso"
                    accept="image/jpeg,image/png,image/webp"
                />
                <small class="form-hint">Lascia vuoto per mantenere l'immagine attuale</small>
            </div>
        </fieldset>

        <!-- SEZIONE: Vittime -->
        <fieldset class="form-section">
            <legend>üïØÔ∏è Vittime</legend>
            <p class="section-hint">Modifica le vittime esistenti o aggiungine di nuove.</p>
            
            <div id="vittime-container">
                <!-- vittime_html -->
            </div>
            
            <button type="button" class="btn btn-secondary btn-add" id="btn-add-vittima">
                + Aggiungi Vittima
            </button>
        </fieldset>

        <!-- SEZIONE: Colpevoli -->
        <fieldset class="form-section">
            <legend>‚öñÔ∏è Colpevoli / Sospettati</legend>
            <p class="section-hint">Modifica i colpevoli esistenti o aggiungine di nuovi.</p>
            
            <div id="colpevoli-container">
                <!-- colpevoli_html -->
            </div>
            
            <button type="button" class="btn btn-secondary btn-add" id="btn-add-colpevole">
                + Aggiungi Colpevole
            </button>
        </fieldset>

        <!-- SEZIONE: Fonti/Articoli -->
        <fieldset class="form-section">
            <legend>üì∞ Fonti e Articoli</legend>
            <p class="section-hint">Aggiungi link a fonti attendibili.</p>
            
            <div id="articoli-container">
                <!-- articoli_html -->
            </div>
            
            <button type="button" class="btn btn-secondary btn-add" id="btn-add-articolo">
                + Aggiungi Fonte
            </button>
        </fieldset>

        <!-- PULSANTI AZIONE -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-lg">üíæ Salva Modifiche</button>
            <a href="<!-- link_annulla -->" class="btn btn-secondary">Annulla</a>
        </div>
    </form>

    <!-- SEZIONE ELIMINAZIONE -->
    <div class="danger-zone">
        <h2>Elimina Caso</h2>
        <p>L'eliminazione √® permanente. Verranno eliminate anche tutte le immagini associate.</p>
        
        <form method="POST" id="form-elimina-caso">
            <input type="hidden" name="action" value="elimina_caso">
            <button type="button" class="btn btn-danger" id="btn-elimina-caso">Elimina Caso Definitivamente</button>
        </form>
    </div>
</main>

<script src="{{PATH_PREFIX}}/js/form-caso.js"></script>
<script src="{{PATH_PREFIX}}/js/modifica-caso.js"></script>